# 安全智能合约开发指南

> 本文档基于 [secure-contracts.com](https://secure-contracts.com/) 网站内容整理

## 1. 开发指南

### 1.1 代码成熟度
- 为开发者和安全工程师提供评估代码库成熟度的标准

### 1.2 高级最佳实践
- 适用于所有智能合约的最佳实践

### 1.3 代币集成检查清单
- 与任意代币交互时需要检查的事项
- 包含非标准ERC20代币的已知问题

### 1.4 事件响应建议
- 创建事件响应计划的指南

### 1.5 安全开发工作流
- 代码开发过程中需要遵循的高级流程

### 1.6 准备安全审查
- 安全审计前的准备工作

## 2. EVM 学习资源

### 2.1 EVM 操作码参考
- 所有EVM操作码的详细信息

### 2.2 交易追踪
- 生成和导航交易追踪的辅助脚本和指导

### 2.3 算术检查
- 在EVM中进行算术检查的指南

### 2.4 以太坊黄皮书指南
- 符号参考，便于阅读以太坊黄皮书

### 2.5 分叉与EIP
- 各以太坊分叉中包含的EIP摘要
- 还包含其他EVM兼容链的相关信息：
  - Celo分叉与CIP
  - TRON升级与TIP
  - BSC分叉与BEP

## 3. 常见智能合约问题

提供常见智能合约问题的示例，包括描述、示例和建议，涵盖多个区块链平台：

### 3.1 Algorand
- 重新加密问题
- 未检查的交易费用
- 关闭账户风险
- 关闭资产风险
- 组大小检查
- 基于时间的重放攻击
- 访问控制问题
- 资产ID检查
- 拒绝服务
- 内部交易费用
- 清除状态交易检查

### 3.2 Cairo
- 算术溢出
- L1到L2地址转换问题
- L1到L2失败
- 过度约束的L1<->L2交互
- 签名重放
- L1处理程序中未检查的来源地址

### 3.3 Cosmos
- 不正确的签名者
- 非确定性
- 未优先处理的消息
- 慢速ABCI方法
- ABCI方法中断
- 损坏的记账
- 舍入错误
- 未注册的消息处理程序
- 缺少错误处理程序

### 3.4 Solana
- 任意CPI
- PDA验证不当
- 所有权检查
- 签名者检查
- Sysvar账户检查
- 指令内省不当

### 3.5 Substrate
- 算术溢出
- 不要出现崩溃！
- 权重和费用
- 先验证
- 未签名交易验证
- 不良随机性
- 错误来源

### 3.6 TON
- 假Jetton合约
- 未检查gas就转发TON
- 将整数用作布尔值

## 4. 程序分析工具

使用自动化工具保护合约安全：

### 4.1 Echidna
- 一个用于检查合约属性的模糊测试工具
- 包含理论介绍、API演练和练习集

### 4.2 Medusa
- 下一代检查合约属性的模糊测试工具

### 4.3 Slither
- 具有CLI和脚本接口的静态分析器

### 4.4 Manticore
- 证明属性正确性的符号执行引擎

每个工具提供：
- 理论介绍、API演练和练习集
- 需要大约两小时获得实际理解的练习

## 5. 资源

### 5.1 安全联系方式

### 5.2 博客文章
- Trail of Bits创建的区块链相关博客文章列表

## 许可证

secure-contracts和building-secure-contracts项目在AGPLv3许可下授权和分发。如果需要例外条款，请联系Trail of Bits。